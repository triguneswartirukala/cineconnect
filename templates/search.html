{% extends "base.html" %}
{% block title %}Search | CineConnect{% endblock %}

{% block content %}

<!-- SEARCH BOX -->
<form method="GET" action="/search">
    <input
        type="text"
        name="q"
        placeholder="Search people or posts..."
        value="{{ query }}"
    >
</form>

<!-- USERS RESULT -->
{% if users %}
<h4 class="muted" style="margin-top:20px;">People</h4>

{% for user in users %}
<div class="post" style="display:flex;align-items:center;gap:12px;">
    {% if user.profile_pic %}
        <img src="/static/uploads/{{ user.profile_pic }}"
             style="width:40px;height:40px;border-radius:50%;object-fit:cover;">
    {% else %}
        <div style="
            width:40px;height:40px;border-radius:50%;
            background:#020617;
            display:flex;align-items:center;justify-content:center;
            font-weight:600;
        ">
            {{ user.username[0]|upper }}
        </div>
    {% endif %}

    <strong>{{ user.username }}</strong>
</div>
{% endfor %}
{% endif %}

<!-- POSTS RESULT -->
{% if posts %}
<h4 class="muted" style="margin-top:20px;">Posts</h4>

{% for post in posts %}
<div class="post">
    <div style="display:flex;align-items:center;gap:10px;">
        {% if post.profile_pic %}
            <img src="/static/uploads/{{ post.profile_pic }}"
                 style="width:32px;height:32px;border-radius:50%;">
        {% endif %}
        <strong>{{ post.username }}</strong>
    </div>

    <div class="post-content">
        {{ post.content }}
    </div>

    {% if post.media %}
        <img src="/static/uploads/{{ post.media }}"
             style="width:100%;border-radius:12px;margin-top:8px;">
    {% endif %}
</div>
{% endfor %}
{% endif %}

{% if query and not users and not posts %}
<p class="muted" style="margin-top:20px;">
    No results found.
</p>
{% endif %}

{% endblock %}
